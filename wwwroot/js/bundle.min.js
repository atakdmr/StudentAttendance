class ConflictModal{constructor(){this.modal=null;this.init()}init(){this.createModal();this.checkForConflictMessages()}createModal(){document.getElementById("conflictModal")||(this.modal=document.createElement("div"),this.modal.id="conflictModal",this.modal.className="modal fade",this.modal.setAttribute("tabindex","-1"),this.modal.setAttribute("aria-hidden","true"),this.modal.innerHTML=`
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content border-0 shadow-lg">
                    <div class="modal-header text-white" style="background: linear-gradient(90deg, #e03131, #ff8787);">
                        <h5 class="modal-title">
                            <i class="fas fa-exclamation-triangle me-2"></i>Çakışma Uyarısı
                        </h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body py-4">
                        <div class="d-flex align-items-start">
                            <div class="me-3">
                                <span class="badge bg-warning text-dark text-uppercase">Dikkat</span>
                            </div>
                            <div class="flex-fill" id="conflictMessage">
                                <!-- Conflict message will be inserted here -->
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer bg-light-subtle">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tamam</button>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(this.modal))}checkForConflictMessages(){const n=document.querySelector("[data-conflict-message]");if(n){const t=n.getAttribute("data-conflict-message");this.show(t)}const t=document.querySelector("#temp-conflict-error");if(t){const n=t.textContent;this.show(n)}}show(n){if(this.modal){const t=this.modal.querySelector("#conflictMessage");t&&(t.textContent=n);const i=new bootstrap.Modal(this.modal);i.show()}}static showConflict(n){const t=new ConflictModal;t.show(n)}}class ModernSidebar{constructor(){this.sidebar=document.getElementById("sidebar");this.toggleBtn=null;this.mainContent=document.querySelector(".main-content");this.isMobileOrTablet=window.innerWidth<=1024;this.accountSidebar=document.getElementById("accountSidebar");this.accountToggle=document.getElementById("accountToggle");this.mobileOverlay=null;this.toggleSidebarHandler=null;this.toggleAccountSidebarHandler=null;console.log("ModernSidebar initialized");console.log("Sidebar element:",this.sidebar);console.log("Account sidebar element:",this.accountSidebar);console.log("Account toggle element:",this.accountToggle);console.log("Is mobile/tablet:",this.isMobileOrTablet);this.init()}init(){if(!this.sidebar){console.log("Sidebar not found!");return}this.createToggleButton();this.createMobileOverlay();this.bindEvents();this.setInitialState();this.highlightActiveNav()}createToggleButton(){if(this.toggleBtn=document.getElementById("sidebarToggleBtn")||document.querySelector(".sidebar-toggle"),console.log("Looking for toggle button..."),console.log("Found by ID:",document.getElementById("sidebarToggleBtn")),console.log("Found by class:",document.querySelector(".sidebar-toggle")),console.log("Final toggle button:",this.toggleBtn),!this.toggleBtn){const n=document.createElement("button");n.className="sidebar-toggle btn btn-icon btn-sidebar rounded-circle";n.innerHTML='<i class="fas fa-bars-staggered"><\/i>';n.setAttribute("aria-label","Menüyü Aç/Kapat");n.type="button";const t=document.querySelector(".content-header .ms-auto");t?(n.classList.add("header-toggle"),t.appendChild(n)):document.body.appendChild(n);this.toggleBtn=n}}createMobileOverlay(){this.mobileOverlay=document.querySelector(".mobile-overlay");this.mobileOverlay||(this.mobileOverlay=document.createElement("div"),this.mobileOverlay.className="mobile-overlay d-md-none",this.mobileOverlay.addEventListener("click",()=>{this.hideAll()}),document.body.appendChild(this.mobileOverlay))}bindEvents(){this.toggleBtn&&!this.toggleBtn.hasAttribute("data-listener-added")?(console.log("Toggle button found, adding event listener"),this.toggleBtn.setAttribute("data-listener-added","true"),this.toggleBtn.addEventListener("click",n=>{console.log("Toggle button clicked!"),n.preventDefault(),n.stopPropagation(),this.toggleSidebar()})):this.toggleBtn?console.log("Toggle button already has event listener"):console.log("Toggle button NOT found!");this.accountToggle&&!this.accountToggle.hasAttribute("data-listener-added")?(console.log("Account toggle button found, adding event listener"),this.accountToggle.setAttribute("data-listener-added","true"),this.accountToggle.addEventListener("click",n=>{console.log("Account toggle button clicked!"),n.preventDefault(),n.stopPropagation(),this.toggleAccountSidebar()})):this.accountToggle?console.log("Account toggle button already has event listener"):console.log("Account toggle button NOT found!");const n=document.querySelector(".sidebar-close");n&&n.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.hideSidebar()});const t=document.querySelector(".account-close");t&&t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.hideAccountSidebar()});window.addEventListener("resize",()=>{this.handleResize()});document.addEventListener("keydown",n=>{n.key==="Escape"&&this.isMobileOrTablet&&this.hideAll()});const i=this.sidebar.querySelectorAll(".nav-link");i.forEach(n=>{n.addEventListener("click",()=>{this.isMobileOrTablet&&this.hideSidebar()})});const r=document.querySelectorAll(".account-menu-item");r.forEach(n=>{n.addEventListener("click",()=>{this.isMobileOrTablet&&this.hideAccountSidebar()})})}setInitialState(){this.isMobileOrTablet?(this.sidebar.classList.remove("show"),this.updateToggleIcon("bars-staggered"),this.toggleBtn&&(this.toggleBtn.style.display="")):(this.sidebar.classList.remove("show","collapsed"),this.toggleBtn&&(this.toggleBtn.style.display="none"));this.accountSidebar&&this.accountSidebar.classList.remove("show")}toggleSidebar(){if(console.log("toggleSidebar called"),console.log("isMobileOrTablet:",this.isMobileOrTablet),!this.isMobileOrTablet){console.log("Not mobile/tablet, returning");return}console.log("Sidebar has show class:",this.sidebar.classList.contains("show"));this.sidebar.classList.contains("show")?(console.log("Hiding sidebar"),this.hideSidebar()):(console.log("Showing sidebar"),this.showSidebar())}toggleAccountSidebar(){this.isMobileOrTablet&&(this.accountSidebar&&this.accountSidebar.classList.contains("show")?this.hideAccountSidebar():this.showAccountSidebar())}collapse(){}expand(){}showSidebar(){if(console.log("showSidebar called"),!this.isMobileOrTablet){console.log("Not mobile/tablet in showSidebar, returning");return}this.hideAccountSidebar();console.log("Adding show class to sidebar");this.sidebar.classList.add("show");console.log("Sidebar classes after adding show:",this.sidebar.className);this.updateToggleIcon("times");this.showOverlay();document.body.style.overflow="hidden";console.log("showSidebar completed")}hideSidebar(){if(console.log("hideSidebar called"),!this.isMobileOrTablet){console.log("Not mobile/tablet in hideSidebar, returning");return}console.log("Removing show class from sidebar");this.sidebar.classList.remove("show");console.log("Sidebar classes after removing show:",this.sidebar.className);this.updateToggleIcon("bars-staggered");this.hideOverlay();document.body.style.overflow="";console.log("hideSidebar completed")}showAccountSidebar(){this.isMobileOrTablet&&this.accountSidebar&&(this.hideSidebar(),this.accountSidebar.classList.add("show"),this.showOverlay(),document.body.style.overflow="hidden")}hideAccountSidebar(){this.isMobileOrTablet&&this.accountSidebar&&(this.accountSidebar.classList.remove("show"),this.hideOverlay(),document.body.style.overflow="")}showOverlay(){this.mobileOverlay&&this.mobileOverlay.classList.add("show")}hideOverlay(){this.mobileOverlay&&this.mobileOverlay.classList.remove("show")}hideAll(){this.hideSidebar();this.hideAccountSidebar()}updateToggleIcon(n){if(this.toggleBtn){const t=n==="times"?"fa-times":"fa-bars-staggered";this.toggleBtn.innerHTML=`<i class="fas ${t}"></i>`;n==="times"?this.toggleBtn.classList.add("is-open"):this.toggleBtn.classList.remove("is-open")}}handleResize(){const n=this.isMobileOrTablet;this.isMobileOrTablet=window.innerWidth<=1024;n!==this.isMobileOrTablet&&(this.isMobileOrTablet?(this.sidebar.classList.remove("collapsed"),this.hideAll(),this.moveToggleToHeader(),this.updateToggleIcon("bars-staggered"),this.toggleBtn&&(this.toggleBtn.style.display="")):(this.hideAll(),document.body.style.overflow="",this.toggleBtn&&(this.toggleBtn.style.display="none")))}moveToggleToHeader(){const n=document.querySelector(".content-header .ms-auto");this.toggleBtn&&n&&this.toggleBtn.parentNode!==n&&(this.toggleBtn.classList.add("header-toggle"),n.appendChild(this.toggleBtn))}moveToggleToSidebar(){this.toggleBtn&&this.toggleBtn.parentNode!==this.sidebar&&this.sidebar.appendChild(this.toggleBtn)}highlightActiveNav(){const t=window.location.pathname.toLowerCase(),i=this.sidebar.querySelectorAll(".nav-link");i.forEach(n=>n.classList.remove("active"));let n=null,r=0;i.forEach(i=>{const u=i.getAttribute("href");if(u&&u!=="#"){const f=u.toLowerCase();(t===f||t.startsWith(f)&&f.length>r)&&(r=f.length,n=i)}});n&&n.classList.add("active")}}document.addEventListener("DOMContentLoaded",()=>{new ModernSidebar});window.addEventListener("popstate",()=>{setTimeout(()=>{const n=new ModernSidebar},100)});window.addEventListener("load",function(){const n=document.getElementById("preloader"),t=document.querySelector(".main-content");if(t&&t.classList.add("is-visible"),n){n.classList.add("is-hidden");const t=()=>{n&&n.parentNode&&n.parentNode.removeChild(n)};n.addEventListener("transitionend",t,{once:!0});setTimeout(t,800)}});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("preloader"),t=document.querySelector(".main-content");n&&!n.classList.contains("is-hidden")&&(n.classList.add("is-hidden"),n.addEventListener("transitionend",()=>{n.parentNode&&n.parentNode.removeChild(n)},{once:!0}),setTimeout(()=>{n&&n.parentNode&&n.parentNode.removeChild(n)},1500));t&&t.classList.add("is-visible")});setTimeout(()=>{const n=document.getElementById("preloader");n&&n.parentNode&&n.parentNode.removeChild(n);const t=document.querySelector(".main-content");t&&t.classList.add("is-visible")},5e3);document.addEventListener("DOMContentLoaded",function(){window.modernSidebar=new ModernSidebar;window.conflictModal=new ConflictModal});